{
"name": "propose_financial_split",
"description": "Submits a verified financial split for a Service Request. Requires customer verification context to ensure the discount is eligible for the specific DMS account.",
"input_schema": {
"type": "object",
"properties": {
"service_request_id": {
"type": "string",
"description": "The ID of the draft Service Request or Labor Operation."
},
"verification_context": {
"type": "object",
"description": "Proof of customer/loyalty eligibility gathered during the conversation.",
"properties": {
"customer_key": { "type": "string", "description": "The verified DMS customer ID." },
"verification_type": { "type": "string", "enum": ["PHONE", "EMAIL", "VIN", "LOYALTY_ID"] },
"verification_value": { "type": "string" },
"coupon_code": { "type": "string", "nullable": true }
},
"required": ["customer_key", "verification_type", "verification_value"]
},
"splits": {
"type": "array",
"items": {
"type": "object",
"properties": {
"price_name": { "type": "string" },
"ledger_action_type": { "type": "string", "enum": ["DEBIT", "CREDIT"] },
"ledger_types": { "type": "string", "description": "UCP/DMS Transaction Type (e.g. SALES_DISCOUNT, REBATE)" },
"amount": {
"type": "object",
"properties": {
"value": { "type": "string" },
"currency_code": { "type": "string" }
}
},
"sequence_id": { "type": "string", "description": "Order of calculation (e.g., '1', '2')." }
},
"required": ["price_name", "ledger_action_type", "amount", "sequence_id"]
}
}
},
"required": ["service_request_id", "verification_context", "splits"]
}
}